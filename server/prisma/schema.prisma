// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("postgresql://rsdb_admin:wert66@localhost:5432/rsdb")
}

model User {
  user_id Int       @id @default(autoincrement())
  email   String    @unique
  name    String?
  recipes Recipe[]
  comments Comment[]
}

model Recipe {
  recipe_id        Int             @id @default(autoincrement())
  type             String
  tags             String[]
  creating_user    User            @relation(fields: [creating_user_id], references: [user_id])
  creating_user_id Int
  date_created     DateTime
  date_last_edited DateTime
  portions         Int
  component_parts  ComponentPart[]
  // tools_needed      Tool[]
  steps            Step[]
  chefs_notes      String
  comments         Comment[]
}

model ComponentPart {
  component_part_id Int    @id @default(autoincrement())
  recipe            Recipe @relation(fields: [recipe_id], references: [recipe_id])
  recipe_id         Int
}

model Step {
  step_id   Int    @id @default(autoincrement())
  recipe    Recipe @relation(fields: [recipe_id], references: [recipe_id])
  recipe_id Int
}

model Tool {
  tool_id Int @id @default(autoincrement())
}

model Comment {
  comment_id Int    @id @default(autoincrement())
  recipe     Recipe @relation(fields: [recipe_id], references: [recipe_id])
  recipe_id  Int
  author     User   @relation(fields: [author_id], references: [user_id])
  author_id  Int
}
